<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/app.css">
  <link rel="stylesheet" href="/public/css/jquery.fancybox.min.css" type="text/css" />
  <link rel="stylesheet" href="/public/css/pgwmodal.min.css" type="text/css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato|Roboto">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  
  
    <!-- Tiny Stats Analytics -->
    <script src="https://stats.diet/tokens/10cb127" async></script>
  
  
  <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>A Simple Plugin Example - Kelly Heard</title>
<meta property="og:title" content="A Simple Plugin Example" />
<meta name="description" content="A simple plugin sample for Sitecore Commerce 8.2.1" />
<meta property="og:description" content="A simple plugin sample for Sitecore Commerce 8.2.1" />
<link rel="canonical" href="https://kellyheard.com///blog/sitecore-commerce-plugin-sample" />
<meta property="og:url" content="https://kellyheard.com///blog/sitecore-commerce-plugin-sample" />
<meta property="og:site_name" content="Kelly Heard" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-03-21T00:00:00+00:00" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "A Simple Plugin Example",
    "datePublished": "2017-03-21T00:00:00+00:00",
    "description": "A simple plugin sample for Sitecore Commerce 8.2.1",
    "url": "https://kellyheard.com///blog/sitecore-commerce-plugin-sample"
  }
</script>
<!-- End Jekyll SEO tag -->
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          KELLY HEARD
        </a>
      </h1>
      <p class="lead">Ecommerce, Technology, Photography & Life</p>
    </div>

    <nav class="sidebar-nav">
      <!-- <a class="sidebar-nav-item" href="/">Home</a> -->
      <!--<a class="sidebar-nav-item" href="/notes">Notes</a>-->
      

      <!--
      
        
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/bio">Bio</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/books">Books</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/contact-thanks">Contact</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/contact">Contact</a>
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/news">Ecommerce News</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/projects">Projects</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/tools">Tools & Products</a>
          
        
      
        
          
        
      
        
          
        
      -->
      <a class="sidebar-nav-item" href="/bio">Bio</a>
      <a class="sidebar-nav-item" href="/contact">Contact</a>
      <a class="sidebar-nav-item" href="/projects">Projects</a>
      <a class="sidebar-nav-item" href="/news">Ecommerce News</a>
      <a class="sidebar-nav-item" href="/tools">Products</a>
      <a class="sidebar-nav-item" href="/books">Books</a>
      <!--<a class="sidebar-nav-item" href="/archive/v2.1.0.zip">Download</a>
      <a class="sidebar-nav-item" href="">GitHub project</a>
      <span class="sidebar-nav-item">Currently v2.1.0</span>-->
    </nav>

    <p>&copy; 2017</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">A Simple Plugin Example</h1>
  <span class="post-date">21 Mar 2017 | Posted in 
    
    <a href='/blog/category/ecommerce'>ecommerce</a>

    
    <a href='/blog/category/code'>code</a>

    
    <a href='/blog/category/sitecore-commerce'>sitecore-commerce</a>
</span>
     
  <div class="tldr">
            <div class="tldrTitle">tldr</div>
            <p>I made a simple plugin for Sitecore Commerce 8.2.1. The source code is available on <a href="https://github.com/heardk/commerce-plugins/tree/master/Commerce.Plugin.Shared.Cart">Github</a></p>

            </div>

<p>The latest version of Sitecore Commerce was released back in January, with version 8.2.1. An update to that release is expected soon, but I thought I’d discuss some of the new capability around the plugin architecture.</p>

<p>We wanted to make the process of adding your own custom business logic as easy as possible. Obviously, this is something that a developer is often required to do in an implementation. No solution is perfect out of the box.</p>

<p>Actually, the entire Commerce engine is based on plugins so a customer can chose which modules they require for their implementation. It’s called <em>opt-in complexity</em> and provides quite a bit more deployment flexibility.</p>

<p>If you download the <a href="https://dev.sitecore.net/Downloads/Sitecore_Commerce/821/Sitecore_Commerce_821.aspx">Release Package</a>, an SDK is also provided which contains a <em>customer sample solution</em>. The solution contains a couple of existing plugins, and a Visual Studio project template for building your own.</p>

<h3 id="shared-cart-plugin">Shared Cart Plugin</h3>

<p>I wanted to create a simple plugin, just to show how it’s done. The requirement is to be able to share a shopping cart across multiple sites, but the CSR and fulfillment process needs to know what store the product was purchased from. Here’s what I did:</p>

<p>When the product is added to the basket, I check the current context and add the current shop name to the new component:</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="c1">//Get shopname from context
</span><span class="kt">var</span> <span class="n">shopname</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">CommerceContext</span><span class="p">.</span><span class="n">GetObjects</span><span class="p">&lt;</span><span class="n">Shop</span><span class="p">&gt;().</span><span class="nf">FirstOrDefault</span><span class="p">().</span><span class="n">Name</span><span class="p">;</span>

<span class="c1">//Add component to CartlineComponent
</span><span class="n">arg</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SharedCartLineComponent</span><span class="p">&gt;().</span><span class="n">ShopName</span> <span class="p">=</span> <span class="n">shopname</span><span class="p">;</span></code></pre></figure>

<p>Now I need to display this value in the Customer &amp; Orders Manager when a CSR looks at the line item details</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">if</span> <span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="n">HasComponent</span><span class="p">&lt;</span><span class="n">SharedCartLineComponent</span><span class="p">&gt;())</span>
<span class="p">{</span>
<span class="kt">var</span> <span class="n">sharedCartLineComponent</span> <span class="p">=</span> <span class="n">line</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">SharedCartLineComponent</span><span class="p">&gt;();</span>
<span class="c1">//Add shop name property to the line item view
</span><span class="n">lineEntityView</span><span class="p">.</span><span class="n">Properties</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">ViewProperty</span> <span class="p">{</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">"ShopName"</span><span class="p">,</span> <span class="n">DisplayName</span> <span class="p">=</span> <span class="s">"Store"</span><span class="p">,</span> <span class="n">IsReadOnly</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">RawValue</span> <span class="p">=</span> <span class="n">sharedCartLineComponent</span><span class="p">.</span><span class="n">ShopName</span> <span class="p">});</span>
<span class="p">}</span></code></pre></figure>

<p>Be sure to check out the full code example on <a href="https://github.com/heardk/commerce-plugins/tree/master/Commerce.Plugin.Shared.Cart">GitHub</a>, specifically <code class="highlighter-rouge">ConfigureSitecore.cs</code>. This is where your plugin functionality gets injected into the Commerce Engine.</p>

<p>Documentation on plugins is a work in progres, but in the meantime, the samples in the SDK (and this one) will definitely give you an idea of how it’s done.</p>

<p><em>Cross posted on my Sitecore Blog, <a href="https://community.sitecore.net/technical_blogs/b/the_commerce_experience">The Commerce Experience</a></em></p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/blog/over-engineering-side-projects">
            Link: Over-Engineering Side Projects
            <small>03 Sep 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/every-song-considered">
            Every Song Considered
            <small>15 Mar 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/ecommerce-trends-three">
            Ecommerce Trends - No. 3
            <small>31 Jan 2017</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//kellyheard.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="/public/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/public/js/pgwmodal.min.js"></script>
<script>
    $(function() {
        $(".btnNotes").click(function() {
            $.pgwModal({
                target: '#dialog' + this.dataset.bookId,
                title: 'Notes -- ' + this.dataset.bookTitle,
                maxWidth: 600
            })
        });
      });
</script>
  </body>
</html>
